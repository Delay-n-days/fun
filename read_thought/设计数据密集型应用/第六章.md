### DDIA（6）

**分区**

	* 什么是分区
	* 为什么要分区，分区的好处是什么
	* 如何分区
	* 分区时要注意什么



**什么是分区？**

这是一种分而治之的思路，例如要处理一个很大的日志，将所有的日志写在一个文件下肯定是不合适的，这时需要将日志   
按照天，或者星期为维度来保存，这样就是将文件拆分开了。查找时候也更快。  

数据库的分区就是将一个大表拆为多个独立的小表，查询的范围小了，性能也会快很多。

**为什么要分区，分区的好处是什么？**

分区主要是为了可扩展性，可扩展性也是如今的大多数应用最需要考虑的一点。 进行分区后不同的分区可以放在不同的机器上   
处理，每个节点都是可以独立处理查询的，这样的查询也是可以并行的。

**如何分区？**

    1. 按照键的范围分区
    2. 通过散列分区

先来看第一点：通过键的范围来分区。这种方式最容易让人想到的就是字典。一个大的字典是以A-Z为开头的一个集合。 我们可以 
将字典分为四个区域，分别是A - D， D - H, H - S, S - Z ，如果查询C 就直接去第一个分区查询，这种方式的好处是查询的这个范围
是有序的，查起来会很容易。 
但是很多时候是无法很好的确定分区的这个数据是比较平衡的，这个需要动态的去调整。

第二点，散列分区： 这种方式的好处是让数据能够进行平衡分布，减少热点。但是数据不再有范围。

散列分区这种方式可以减少热点的存在，但是如果热点只有一个，同一个时刻有大量请求到一个热点里也可能照成系统出问题。
一个方式就是将这个请求打散，在这一个单独的热点后再加两位随机数，将这个放在不同的主键里。



